---
layout: default
---

<div class="posts">
  {% for post in site.posts %}
    <article class="post" data-category="{{ post.category | default: 'all' }}">

      <span class="date">{{ post.date | date: "%Y-%m-%d" }}</span>
      <h1><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></h1>

    </article>
  {% endfor %}
</div>

<script>
  // URL 파라미터에서 카테고리 읽기
  function getUrlParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
  }

  // 카테고리 이름 한글화
  function getCategoryName(category) {
    var categoryNames = {
      'cvfactory': 'CVFactory',
      'company-work': 'Company Work',
      'all': '전체'
    };
    return categoryNames[category] || category;
  }

  // 페이지 로드 시 카테고리 설정 및 필터링
  document.addEventListener('DOMContentLoaded', function() {
    var category = getUrlParameter('category');
    // URL 파라미터가 없을 때 기본값으로 'all' 설정
    if (!category) {
      category = 'all';
    }
    
    // 드롭다운 메뉴에서 현재 카테고리 활성화
    var dropdownLinks = document.querySelectorAll('.dropdown-content a');
    dropdownLinks.forEach(function(link) {
      link.classList.remove('active');
      
      var linkCategory = link.getAttribute('href').split('=')[1];
      if (linkCategory === category) {
        link.classList.add('active');
      }
    });
    
    // 동적 필터링 실행
    filterPostsByCategory(category);
  });

  // 카테고리 선택 시 드롭다운 즉시 닫기
  document.addEventListener('DOMContentLoaded', function() {
    var dropdownLinks = document.querySelectorAll('.dropdown-content a');
    var dropdown = document.querySelector('.dropdown');
    
    dropdownLinks.forEach(function(link) {
      link.addEventListener('click', function(e) {
        // 드롭다운 즉시 닫기
        dropdown.classList.remove('active');
      });
    });
  });

  // 카테고리별 포스트 필터링
  function filterPostsByCategory(category) {
    var posts = document.querySelectorAll('.post');
    var hasVisiblePosts = false;
    
    posts.forEach(function(post) {
      var postCategory = post.getAttribute('data-category');
      
      // 대소문자 무시 비교
      if (category === 'all' || category.toLowerCase() === postCategory.toLowerCase()) {
        post.style.display = 'block';
        hasVisiblePosts = true;
      } else {
        post.style.display = 'none';
      }
    });
    
    // 포스트가 하나도 없을 경우 전체 숨김
    if (!hasVisiblePosts && category !== 'all') {
      document.querySelector('.posts').style.display = 'none';
    } else {
      document.querySelector('.posts').style.display = 'block';
    }
  }
</script>