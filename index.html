---
layout: default
---

<!-- 왼쪽 고정 사이드바 -->
<aside class="sidebar">
  <div class="sidebar-content">
    <h3>Categories</h3>
    <ul class="category-list">
      <li><a href="#" data-category="all" class="category-link">All</a></li>
      <li><a href="#" data-category="ai" class="category-link">AI</a></li>
      <li><a href="#" data-category="backend" class="category-link">Backend</a></li>
      <li><a href="#" data-category="frontend" class="category-link">Frontend</a></li>
      <li><a href="#" data-category="company-work" class="category-link">Company Work</a></li>
      <li><a href="#" data-category="career" class="category-link">Career</a></li>
      <li><a href="#" data-category="project" class="category-link">Project</a></li>
      <li><a href="#" data-category="study" class="category-link">Study</a></li>
    </ul>
  </div>
</aside>

<!-- 플렉스박스 레이아웃 래퍼 -->
<div class="layout-wrapper">
  <!-- 메인 콘텐츠 영역 -->
  <main class="main-content">
    <div class="posts">
  {% for post in site.posts %}
    <article class="post" data-category="{{ post.category | default: 'all' }}">

      <span class="date">{{ post.date | date: "%Y-%m-%d" }}</span>
      <h1><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></h1>

    </article>
  {% endfor %}
    </div>
  </main>
</div>

<script>
  // URL 파라미터에서 카테고리 읽기
  function getUrlParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
  }

  // 카테고리 이름 영어화
  function getCategoryName(category) {
    var categoryNames = {
      'cvfactory': 'CVFactory',
      'company-work': 'Company Work',
      'all': 'All'
    };
    return categoryNames[category] || category;
  }

  // 페이지 로드 시 카테고리 설정 및 필터링
  document.addEventListener('DOMContentLoaded', function() {
    var category = getUrlParameter('category');
    // URL 파라미터가 없을 때 기본값으로 'all' 설정
    if (!category) {
      category = 'all';
    }
    
    // 사이드바 메뉴에서 현재 카테고리 활성화
    var categoryLinks = document.querySelectorAll('.category-link');
    categoryLinks.forEach(function(link) {
      link.classList.remove('active');
      
      var linkCategory = link.getAttribute('data-category');
      if (linkCategory === category) {
        link.classList.add('active');
      }
    });
    
    // 동적 필터링 실행
    filterPostsByCategory(category);
  });

  // 카테고리 선택 시 페이지 새로고침 방지 및 필터링
  document.addEventListener('DOMContentLoaded', function() {
    var categoryLinks = document.querySelectorAll('.category-link');
    
    categoryLinks.forEach(function(link) {
      link.addEventListener('click', function(e) {
        e.preventDefault(); // 페이지 새로고침 방지
        
        // 데이터 속성에서 카테고리 추출
        var category = this.getAttribute('data-category');
        
        // URL 변경 (페이지 새로고침 없이)
        var newUrl = window.location.pathname + (category ? '?category=' + category : '');
        window.history.pushState({category: category}, '', newUrl);
        
        // 사이드바에서 현재 카테고리 활성화
        categoryLinks.forEach(function(l) {
          l.classList.remove('active');
        });
        this.classList.add('active');
        
        // 필터링 실행
        filterPostsByCategory(category);
      });
    });
  });

  // 브라우저 뒤로 가기/앞으로 가기 버튼 처리
  window.addEventListener('popstate', function(e) {
    var category = e.state && e.state.category ? e.state.category : 'all';
    filterPostsByCategory(category);
  });

  // 카테고리별 포스트 필터링
  function filterPostsByCategory(category) {
    var posts = document.querySelectorAll('.post');
    var hasVisiblePosts = false;
    
    posts.forEach(function(post) {
      var postCategory = post.getAttribute('data-category');
      
      // 대소문자 무시 비교
      if (category === 'all' || category.toLowerCase() === postCategory.toLowerCase()) {
        post.style.display = 'block';
        hasVisiblePosts = true;
      } else {
        post.style.display = 'none';
      }
    });
    
    // 포스트가 하나도 없을 경우 전체 숨김
    if (!hasVisiblePosts && category !== 'all') {
      document.querySelector('.posts').style.display = 'none';
    } else {
      document.querySelector('.posts').style.display = 'block';
    }
  }
</script>