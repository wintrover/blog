flowchart TD
    A[User Starts KYC] --> B[ID Card Capture]
    B --> C{Quality Check}
    C -->|Pass| D[OCR Processing]
    C -->|Fail| B

    D --> E[Face Video Recording]
    E --> F{Frame Quality Check}
    F -->|Pass| G[Face Embedding Extraction]
    F -->|Fail| E

    G --> H[Video-Image Similarity Calculation]
    H --> I{Comparison Result}

    I -->|Match| J[Database Storage]
    I -->|No Match| K[Manual Review Required]

    J --> L[KYC Complete]
    K --> M[Support Team Notification]

    subgraph "Real-time Updates"
        N[WebSocket Status Updates]
        O[Progress Indicators]
        P[Error Messages]
    end

    B -.-> N
    E -.-> N
    H -.-> N
    L -.-> N
    M -.-> N

    style A fill:#e3f2fd
    style L fill:#c8e6c9
    style K fill:#ffcdd2
    style M fill:#fff9c4